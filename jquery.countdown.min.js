!function(t){t.fn.countdown=function(e){function n(t){return parseInt(t.replace(/^0/g,""))}function r(t){var e;if(e=/^(\d{4})[^\d]+(\d{1,2})[^\d]+(\d{1,2})\s+(\d{2})[^\d]+(\d{1,2})[^\d]+(\d{1,2})$/.exec(t)){var r=n(e[1]),a=n(e[2])-1,i=n(e[3]),o=n(e[4]),d=n(e[5]),u=n(e[6]);return new Date(r,a,i,o,d,u)}return new Date(parseInt(t))}function a(t){return t.getTime()-(new Date).getTime()}function i(t){var e={},n=Math.floor(t/1e3);return e.d=Math.floor(n/86400),e.h=Math.floor(n/3600)%24,e.m=Math.floor(n/60)%60,e.s=n%60,e.ms=t%1e3,e}function o(t,e){return t.replace(/%\{d\}/gi,d(e.d)).replace(/%\{h\}/gi,d(e.h)).replace(/%\{m\}/gi,d(e.m)).replace(/%\{s\}/gi,d(e.s)).replace(/%\{sss\}/gi,u(e.ms))}function d(t){return t>0?(10>t&&(t="0"+t),String(t)):"00"}function u(t){return t>0?(10>t?t="00"+t:100>t&&(t="0"+t),String(t)):"00"}return e=t.extend({},t.fn.countdown.defaults,e),this.each(function(){function n(){var t=a(f);if(t>0)return d.html(o(u.notStart,i(t))),u.beforeStart&&u.beforeStart(d),void setTimeout(function(){n()},u.interval);var e=a(s);return 0>=e?(d.html(u.end),void(u.afterEnd&&u.afterEnd(d))):"function"==typeof u.print?u.print(i(e)):(d.html(o(u.tmpl,i(e))),u.inTime&&u.inTime(d),void setTimeout(function(){n()},u.interval))}var d=t(this),u=t.metadata?t.extend({},e,d.metadata()):e,f=r(d.attr(u.attrName_start)),s=r(d.attr(u.attrName_end));n()})},t.fn.countdown.defaults={attrName_start:"date_s",attrName_end:"date_e",tmpl:"剩余%{d}天%{h}时%{m}分%{s}秒%{sss}毫秒",end:"已到期",notStart:"即将开始%{d}天%{h}时%{m}分%{s}秒%{sss}毫秒",afterEnd:null,beforeStart:null,inTime:null,interval:10,print:0}}(jQuery);